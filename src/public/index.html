<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=0.8, maximum-scale=0.8, user-scalable=no" />
    <meta name="theme-color" content="#1a3d1a" />
    <meta name="description" content="Military Simulation Game" />
    <link rel="manifest" href="/manifest.json" />
    <title>Milsim - Vue</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <script type="module" crossorigin src="/assets/index-15fc6248.js"></script>
    <link rel="stylesheet" href="/assets/index-b56ee303.css">
  </head>
  <body>
    <div id="app"></div>
    
    <script>
      // Minimal PWA install handler without service worker
      let deferredPrompt;
      
      window.addEventListener('beforeinstallprompt', (e) => {
        // Prevent Chrome from automatically showing the prompt
        e.preventDefault();
        // Stash the event so it can be triggered later
        deferredPrompt = e;
        // Show install button after a delay to ensure app is loaded
        setTimeout(showInstallPromotion, 3000);
      });

      function showInstallPromotion() {
        // Only show if not already installed and we have the prompt
        if (!deferredPrompt) return;
        
        // Create install button
        const installButton = document.createElement('button');
        installButton.textContent = 'ðŸ“± Instalar App';
        installButton.style.cssText = `
          position: fixed;
          top: 20px;
          left: 50%;
          transform: translateX(-50%);
          background: #1a3d1a;
          color: white;
          border: none;
          padding: 12px 20px;
          border-radius: 6px;
          cursor: pointer;
          z-index: 10000;
          font-size: 14px;
          font-weight: bold;
          box-shadow: 0 2px 10px rgba(0,0,0,0.3);
        `;
        
        installButton.addEventListener('click', () => {
          // Hide the install button
          installButton.style.display = 'none';
          // Show the install prompt
          deferredPrompt.prompt();
          // Wait for the user to respond to the prompt
          deferredPrompt.userChoice.then((choiceResult) => {
            if (choiceResult.outcome === 'accepted') {
              console.log('User accepted the install prompt');
            } else {
              console.log('User dismissed the install prompt');
            }
            deferredPrompt = null;
          });
        });

        document.body.appendChild(installButton);
      }

      // Remove button if app is already installed
      window.addEventListener('appinstalled', (evt) => {
        console.log('App was installed successfully');
        deferredPrompt = null;
        const installButton = document.querySelector('button[style*="position: fixed"]');
        if (installButton) {
          installButton.remove();
        }
      });
    </script>
  </body>
</html>