(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const xn=!1,Tn=(n,e)=>n===e,ht=Symbol("solid-proxy"),On=typeof Proxy=="function",Pn=Symbol("solid-track"),He={equals:Tn};let xe=null,Vt=Qt;const pe=1,Ve=2,Jt={owned:null,cleanups:null,context:null,owner:null};var C=null;let st=null,Ln=null,N=null,Q=null,he=null,Ye=0;function Te(n,e){const t=N,r=C,s=n.length===0,i=e===void 0?r:e,a=s?Jt:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=s?n:()=>n(()=>ie(()=>Le(a)));C=a,N=null;try{return we(o,!0)}finally{N=t,C=r}}function v(n,e){e=e?Object.assign({},He,e):He;const t={value:n,observers:null,observerSlots:null,comparator:e.equals||void 0},r=s=>(typeof s=="function"&&(s=s(t.value)),Xt(t,s));return[Yt.bind(t),r]}function Y(n,e,t){const r=Xe(n,e,!1,pe);Ne(r)}function Je(n,e,t){Vt=qn;const r=Xe(n,e,!1,pe);r.user=!0,he?he.push(r):Ne(r)}function J(n,e,t){t=t?Object.assign({},He,t):He;const r=Xe(n,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=t.equals||void 0,Ne(r),Yt.bind(r)}function Nn(n){return we(n,!1)}function ie(n){if(N===null)return n();const e=N;N=null;try{return n()}finally{N=e}}function St(n,e,t){const r=Array.isArray(n);let s,i=t&&t.defer;return a=>{let o;if(r){o=Array(n.length);for(let u=0;u<n.length;u++)o[u]=n[u]()}else o=n();if(i)return i=!1,a;const c=ie(()=>e(o,s,a));return s=o,c}}function Wt(n){Je(()=>ie(n))}function ke(n){return C===null||(C.cleanups===null?C.cleanups=[n]:C.cleanups.push(n)),n}function Bn(n,e){xe||(xe=Symbol("error")),C=Xe(void 0,void 0,!0),C.context={...C.context,[xe]:[e]};try{return n()}catch(t){Be(t)}finally{C=C.owner}}function Kt(){return C}function zt(n,e){const t=C,r=N;C=n,N=null;try{return we(e,!0)}catch(s){Be(s)}finally{C=t,N=r}}function In(n){const e=N,t=C;return Promise.resolve().then(()=>{N=e,C=t;let r;return we(n,!1),N=C=null,r?r.done:void 0})}const[si,ii]=v(!1);function Et(n,e){const t=Symbol("context");return{id:t,Provider:Fn(t),defaultValue:n}}function kt(n){let e;return C&&C.context&&(e=C.context[n.id])!==void 0?e:n.defaultValue}function $t(n){const e=J(n),t=J(()=>ft(e()));return t.toArray=()=>{const r=t();return Array.isArray(r)?r:r!=null?[r]:[]},t}function Yt(){if(this.sources&&this.state)if(this.state===pe)Ne(this);else{const n=Q;Q=null,we(()=>Ke(this),!1),Q=n}if(N){const n=this.observers?this.observers.length:0;N.sources?(N.sources.push(this),N.sourceSlots.push(n)):(N.sources=[this],N.sourceSlots=[n]),this.observers?(this.observers.push(N),this.observerSlots.push(N.sources.length-1)):(this.observers=[N],this.observerSlots=[N.sources.length-1])}return this.value}function Xt(n,e,t){let r=n.value;return(!n.comparator||!n.comparator(r,e))&&(n.value=e,n.observers&&n.observers.length&&we(()=>{for(let s=0;s<n.observers.length;s+=1){const i=n.observers[s],a=st&&st.running;a&&st.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?Q.push(i):he.push(i),i.observers&&Zt(i)),a||(i.state=pe)}if(Q.length>1e6)throw Q=[],new Error},!1)),e}function Ne(n){if(!n.fn)return;Le(n);const e=Ye;Dn(n,n.value,e)}function Dn(n,e,t){let r;const s=C,i=N;N=C=n;try{r=n.fn(e)}catch(a){return n.pure&&(n.state=pe,n.owned&&n.owned.forEach(Le),n.owned=null),n.updatedAt=t+1,Be(a)}finally{N=i,C=s}(!n.updatedAt||n.updatedAt<=t)&&(n.updatedAt!=null&&"observers"in n?Xt(n,r):n.value=r,n.updatedAt=t)}function Xe(n,e,t,r=pe,s){const i={fn:n,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:C,context:C?C.context:null,pure:t};return C===null||C!==Jt&&(C.owned?C.owned.push(i):C.owned=[i]),i}function We(n){if(n.state===0)return;if(n.state===Ve)return Ke(n);if(n.suspense&&ie(n.suspense.inFallback))return n.suspense.effects.push(n);const e=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<Ye);)n.state&&e.push(n);for(let t=e.length-1;t>=0;t--)if(n=e[t],n.state===pe)Ne(n);else if(n.state===Ve){const r=Q;Q=null,we(()=>Ke(n,e[0]),!1),Q=r}}function we(n,e){if(Q)return n();let t=!1;e||(Q=[]),he?t=!0:he=[],Ye++;try{const r=n();return Un(t),r}catch(r){t||(he=null),Q=null,Be(r)}}function Un(n){if(Q&&(Qt(Q),Q=null),n)return;const e=he;he=null,e.length&&we(()=>Vt(e),!1)}function Qt(n){for(let e=0;e<n.length;e++)We(n[e])}function qn(n){let e,t=0;for(e=0;e<n.length;e++){const r=n[e];r.user?n[t++]=r:We(r)}for(e=0;e<t;e++)We(n[e])}function Ke(n,e){n.state=0;for(let t=0;t<n.sources.length;t+=1){const r=n.sources[t];if(r.sources){const s=r.state;s===pe?r!==e&&(!r.updatedAt||r.updatedAt<Ye)&&We(r):s===Ve&&Ke(r,e)}}}function Zt(n){for(let e=0;e<n.observers.length;e+=1){const t=n.observers[e];t.state||(t.state=Ve,t.pure?Q.push(t):he.push(t),t.observers&&Zt(t))}}function Le(n){let e;if(n.sources)for(;n.sources.length;){const t=n.sources.pop(),r=n.sourceSlots.pop(),s=t.observers;if(s&&s.length){const i=s.pop(),a=t.observerSlots.pop();r<s.length&&(i.sourceSlots[a]=r,s[r]=i,t.observerSlots[r]=a)}}if(n.tOwned){for(e=n.tOwned.length-1;e>=0;e--)Le(n.tOwned[e]);delete n.tOwned}if(n.owned){for(e=n.owned.length-1;e>=0;e--)Le(n.owned[e]);n.owned=null}if(n.cleanups){for(e=n.cleanups.length-1;e>=0;e--)n.cleanups[e]();n.cleanups=null}n.state=0}function Gn(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function Nt(n,e,t){try{for(const r of e)r(n)}catch(r){Be(r,t&&t.owner||null)}}function Be(n,e=C){const t=xe&&e&&e.context&&e.context[xe],r=Gn(n);if(!t)throw r;he?he.push({fn(){Nt(r,t,e)},state:pe}):Nt(r,t,e)}function ft(n){if(typeof n=="function"&&!n.length)return ft(n());if(Array.isArray(n)){const e=[];for(let t=0;t<n.length;t++){const r=ft(n[t]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return n}function Fn(n,e){return function(r){let s;return Y(()=>s=ie(()=>(C.context={...C.context,[n]:r.value},$t(()=>r.children))),void 0),s}}const jn=Symbol("fallback");function Bt(n){for(let e=0;e<n.length;e++)n[e]()}function Mn(n,e,t={}){let r=[],s=[],i=[],a=0,o=e.length>1?[]:null;return ke(()=>Bt(i)),()=>{let c=n()||[],u=c.length,h,l;return c[Pn],ie(()=>{let g,E,f,y,b,w,$,m,R;if(u===0)a!==0&&(Bt(i),i=[],r=[],s=[],a=0,o&&(o=[])),t.fallback&&(r=[jn],s[0]=Te(j=>(i[0]=j,t.fallback())),a=1);else if(a===0){for(s=new Array(u),l=0;l<u;l++)r[l]=c[l],s[l]=Te(d);a=u}else{for(f=new Array(u),y=new Array(u),o&&(b=new Array(u)),w=0,$=Math.min(a,u);w<$&&r[w]===c[w];w++);for($=a-1,m=u-1;$>=w&&m>=w&&r[$]===c[m];$--,m--)f[m]=s[$],y[m]=i[$],o&&(b[m]=o[$]);for(g=new Map,E=new Array(m+1),l=m;l>=w;l--)R=c[l],h=g.get(R),E[l]=h===void 0?-1:h,g.set(R,l);for(h=w;h<=$;h++)R=r[h],l=g.get(R),l!==void 0&&l!==-1?(f[l]=s[h],y[l]=i[h],o&&(b[l]=o[h]),l=E[l],g.set(R,l)):i[h]();for(l=w;l<u;l++)l in f?(s[l]=f[l],i[l]=y[l],o&&(o[l]=b[l],o[l](l))):s[l]=Te(d);s=s.slice(0,a=u),r=c.slice(0)}return s});function d(g){if(i[l]=g,o){const[E,f]=v(l);return o[l]=f,e(c[l],E)}return e(c[l])}}}function S(n,e){return ie(()=>n(e||{}))}function De(){return!0}const Hn={get(n,e,t){return e===ht?t:n.get(e)},has(n,e){return e===ht?!0:n.has(e)},set:De,deleteProperty:De,getOwnPropertyDescriptor(n,e){return{configurable:!0,enumerable:!0,get(){return n.get(e)},set:De,deleteProperty:De}},ownKeys(n){return n.keys()}};function it(n){return(n=typeof n=="function"?n():n)?n:{}}function Vn(){for(let n=0,e=this.length;n<e;++n){const t=this[n]();if(t!==void 0)return t}}function Jn(...n){let e=!1;for(let a=0;a<n.length;a++){const o=n[a];e=e||!!o&&ht in o,n[a]=typeof o=="function"?(e=!0,J(o)):o}if(On&&e)return new Proxy({get(a){for(let o=n.length-1;o>=0;o--){const c=it(n[o])[a];if(c!==void 0)return c}},has(a){for(let o=n.length-1;o>=0;o--)if(a in it(n[o]))return!0;return!1},keys(){const a=[];for(let o=0;o<n.length;o++)a.push(...Object.keys(it(n[o])));return[...new Set(a)]}},Hn);const t={},r=Object.create(null);for(let a=n.length-1;a>=0;a--){const o=n[a];if(!o)continue;const c=Object.getOwnPropertyNames(o);for(let u=c.length-1;u>=0;u--){const h=c[u];if(h==="__proto__"||h==="constructor")continue;const l=Object.getOwnPropertyDescriptor(o,h);if(!r[h])r[h]=l.get?{enumerable:!0,configurable:!0,get:Vn.bind(t[h]=[l.get.bind(o)])}:l.value!==void 0?l:void 0;else{const d=t[h];d&&(l.get?d.push(l.get.bind(o)):l.value!==void 0&&d.push(()=>l.value))}}}const s={},i=Object.keys(r);for(let a=i.length-1;a>=0;a--){const o=i[a],c=r[o];c&&c.get?Object.defineProperty(s,o,c):s[o]=c?c.value:void 0}return s}const Wn=n=>`Stale read from <${n}>.`;function en(n){const e="fallback"in n&&{fallback:()=>n.fallback};return J(Mn(()=>n.each,n.children,e||void 0))}function ye(n){const e=n.keyed,t=J(()=>n.when,void 0,void 0),r=e?t:J(t,void 0,{equals:(s,i)=>!s==!i});return J(()=>{const s=r();if(s){const i=n.children;return typeof i=="function"&&i.length>0?ie(()=>i(e?s:()=>{if(!ie(r))throw Wn("Show");return t()})):i}return n.fallback},void 0,void 0)}let Ee;function Kn(){Ee&&[...Ee].forEach(n=>n())}function zn(n){let e;const[t,r]=v(e,void 0);return Ee||(Ee=new Set),Ee.add(r),ke(()=>Ee.delete(r)),J(()=>{let s;if(s=t()){const i=n.fallback;return typeof i=="function"&&i.length?ie(()=>i(s,()=>r())):i}return Bn(()=>n.children,r)},void 0,void 0)}const Ct=n=>J(()=>n());function Yn(n,e,t){let r=t.length,s=e.length,i=r,a=0,o=0,c=e[s-1].nextSibling,u=null;for(;a<s||o<i;){if(e[a]===t[o]){a++,o++;continue}for(;e[s-1]===t[i-1];)s--,i--;if(s===a){const h=i<r?o?t[o-1].nextSibling:t[i-o]:c;for(;o<i;)n.insertBefore(t[o++],h)}else if(i===o)for(;a<s;)(!u||!u.has(e[a]))&&e[a].remove(),a++;else if(e[a]===t[i-1]&&t[o]===e[s-1]){const h=e[--s].nextSibling;n.insertBefore(t[o++],e[a++].nextSibling),n.insertBefore(t[--i],h),e[s]=t[i]}else{if(!u){u=new Map;let l=o;for(;l<i;)u.set(t[l],l++)}const h=u.get(e[a]);if(h!=null)if(o<h&&h<i){let l=a,d=1,g;for(;++l<s&&l<i&&!((g=u.get(e[l]))==null||g!==h+d);)d++;if(d>h-o){const E=e[a];for(;o<h;)n.insertBefore(t[o++],E)}else n.replaceChild(t[o++],e[a++])}else a++;else e[a++].remove()}}}const It="_$DX_DELEGATE";function Xn(n,e,t,r={}){let s;return Te(i=>{s=i,e===document?n():P(e,n(),e.firstChild?null:void 0,t)},r.owner),()=>{s(),e.textContent=""}}function I(n,e,t,r){let s;const i=()=>{const o=document.createElement("template");return o.innerHTML=n,o.content.firstChild},a=()=>(s||(s=i())).cloneNode(!0);return a.cloneNode=a,a}function ge(n,e=window.document){const t=e[It]||(e[It]=new Set);for(let r=0,s=n.length;r<s;r++){const i=n[r];t.has(i)||(t.add(i),e.addEventListener(i,Qn))}}function tn(n,e){e==null?n.removeAttribute("class"):n.className=e}function H(n,e,t,r){Array.isArray(t)?(n[`$$${e}`]=t[0],n[`$$${e}Data`]=t[1]):n[`$$${e}`]=t}function z(n,e,t){t!=null?n.style.setProperty(e,t):n.style.removeProperty(e)}function nn(n,e,t){return ie(()=>n(e,t))}function P(n,e,t,r){if(t!==void 0&&!r&&(r=[]),typeof e!="function")return ze(n,e,r,t);Y(s=>ze(n,e(),s,t),r)}function Qn(n){let e=n.target;const t=`$$${n.type}`,r=n.target,s=n.currentTarget,i=c=>Object.defineProperty(n,"target",{configurable:!0,value:c}),a=()=>{const c=e[t];if(c&&!e.disabled){const u=e[`${t}Data`];if(u!==void 0?c.call(e,u,n):c.call(e,n),n.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(n.target)&&i(e.host),!0},o=()=>{for(;a()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return e||document}}),n.composedPath){const c=n.composedPath();i(c[0]);for(let u=0;u<c.length-2&&(e=c[u],!!a());u++){if(e._$host){e=e._$host,o();break}if(e.parentNode===s)break}}else o();i(r)}function ze(n,e,t,r,s){for(;typeof t=="function";)t=t();if(e===t)return t;const i=typeof e,a=r!==void 0;if(n=a&&t[0]&&t[0].parentNode||n,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===t))return t;if(a){let o=t[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),t=Se(n,t,r,o)}else t!==""&&typeof t=="string"?t=n.firstChild.data=e:t=n.textContent=e}else if(e==null||i==="boolean")t=Se(n,t,r);else{if(i==="function")return Y(()=>{let o=e();for(;typeof o=="function";)o=o();t=ze(n,o,t,r)}),()=>t;if(Array.isArray(e)){const o=[],c=t&&Array.isArray(t);if(dt(o,e,t,s))return Y(()=>t=ze(n,o,t,r,!0)),()=>t;if(o.length===0){if(t=Se(n,t,r),a)return t}else c?t.length===0?Dt(n,o,r):Yn(n,t,o):(t&&Se(n),Dt(n,o));t=o}else if(e.nodeType){if(Array.isArray(t)){if(a)return t=Se(n,t,r,e);Se(n,t,null,e)}else t==null||t===""||!n.firstChild?n.appendChild(e):n.replaceChild(e,n.firstChild);t=e}}return t}function dt(n,e,t,r){let s=!1;for(let i=0,a=e.length;i<a;i++){let o=e[i],c=t&&t[n.length],u;if(!(o==null||o===!0||o===!1))if((u=typeof o)=="object"&&o.nodeType)n.push(o);else if(Array.isArray(o))s=dt(n,o,c)||s;else if(u==="function")if(r){for(;typeof o=="function";)o=o();s=dt(n,Array.isArray(o)?o:[o],Array.isArray(c)?c:[c])||s}else n.push(o),s=!0;else{const h=String(o);c&&c.nodeType===3&&c.data===h?n.push(c):n.push(document.createTextNode(h))}}return s}function Dt(n,e,t=null){for(let r=0,s=e.length;r<s;r++)n.insertBefore(e[r],t)}function Se(n,e,t,r){if(t===void 0)return n.textContent="";const s=r||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const o=e[a];if(s!==o){const c=o.parentNode===n;!i&&!a?c?n.replaceChild(s,o):n.insertBefore(s,t):c&&o.remove()}else i=!0}}else n.insertBefore(s,t);return[s]}const Zn=!1;function rn(){let n=new Set;function e(s){return n.add(s),()=>n.delete(s)}let t=!1;function r(s,i){if(t)return!(t=!1);const a={to:s,options:i,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const o of n)o.listener({...a,from:o.location,retry:c=>{c&&(t=!0),o.navigate(s,{...i,resolve:!1})}});return!a.defaultPrevented}return{subscribe:e,confirm:r}}let pt;function At(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),pt=window.history.state._depth}At();function er(n){return{...n,_depth:window.history.state&&window.history.state._depth}}function tr(n,e){let t=!1;return()=>{const r=pt;At();const s=r==null?null:pt-r;if(t){t=!1;return}s&&e(s)?(t=!0,window.history.go(-s)):n()}}const nr=/^(?:[a-z0-9]+:)?\/\//i,rr=/^\/+|(\/)\/+$/g,sn="http://sr";function Oe(n,e=!1){const t=n.replace(rr,"$1");return t?e||/^[?#]/.test(t)?t:"/"+t:""}function Ge(n,e,t){if(nr.test(e))return;const r=Oe(n),s=t&&Oe(t);let i="";return!s||e.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+Oe(e,!i)}function sr(n,e){if(n==null)throw new Error(e);return n}function ir(n,e){return Oe(n).replace(/\/*(\*.*)?$/g,"")+Oe(e)}function on(n){const e={};return n.searchParams.forEach((t,r)=>{r in e?Array.isArray(e[r])?e[r].push(t):e[r]=[e[r],t]:e[r]=t}),e}function or(n,e,t){const[r,s]=n.split("/*",2),i=r.split("/").filter(Boolean),a=i.length;return o=>{const c=o.split("/").filter(Boolean),u=c.length-a;if(u<0||u>0&&s===void 0&&!e)return null;const h={path:a?"":"/",params:{}},l=d=>t===void 0?void 0:t[d];for(let d=0;d<a;d++){const g=i[d],E=g[0]===":",f=E?c[d]:c[d].toLowerCase(),y=E?g.slice(1):g.toLowerCase();if(E&&ot(f,l(y)))h.params[y]=f;else if(E||!ot(f,y))return null;h.path+=`/${f}`}if(s){const d=u?c.slice(-u).join("/"):"";if(ot(d,l(s)))h.params[s]=d;else return null}return h}}function ot(n,e){const t=r=>r===n;return e===void 0?!0:typeof e=="string"?t(e):typeof e=="function"?e(n):Array.isArray(e)?e.some(t):e instanceof RegExp?e.test(n):!1}function ar(n){const[e,t]=n.pattern.split("/*",2),r=e.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(t===void 0?0:1))}function an(n){const e=new Map,t=Kt();return new Proxy({},{get(r,s){return e.has(s)||zt(t,()=>e.set(s,J(()=>n()[s]))),e.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(n())}})}function cn(n){let e=/(\/?\:[^\/]+)\?/.exec(n);if(!e)return[n];let t=n.slice(0,e.index),r=n.slice(e.index+e[0].length);const s=[t,t+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(r);)s.push(t+=e[1]),r=r.slice(e[0].length);return cn(r).reduce((i,a)=>[...i,...s.map(o=>o+a)],[])}const cr=100,ln=Et(),un=Et(),Rt=()=>sr(kt(ln),"<A> and 'use' router primitives can be only used inside a Route."),lr=()=>Rt().navigatorFactory(),ur=()=>Rt().location,hn=()=>Rt().params;function hr(n,e=""){const{component:t,preload:r,load:s,children:i,info:a}=n,o=!i||Array.isArray(i)&&!i.length,c={key:n,component:t,preload:r||s,info:a};return fn(n.path).reduce((u,h)=>{for(const l of cn(h)){const d=ir(e,l);let g=o?d:d.split("/*",1)[0];g=g.split("/").map(E=>E.startsWith(":")||E.startsWith("*")?E:encodeURIComponent(E)).join("/"),u.push({...c,originalPath:h,pattern:g,matcher:or(g,!o,n.matchFilters)})}return u},[])}function fr(n,e=0){return{routes:n,score:ar(n[n.length-1])*1e4-e,matcher(t){const r=[];for(let s=n.length-1;s>=0;s--){const i=n[s],a=i.matcher(t);if(!a)return null;r.unshift({...a,route:i})}return r}}}function fn(n){return Array.isArray(n)?n:[n]}function dn(n,e="",t=[],r=[]){const s=fn(n);for(let i=0,a=s.length;i<a;i++){const o=s[i];if(o&&typeof o=="object"){o.hasOwnProperty("path")||(o.path="");const c=hr(o,e);for(const u of c){t.push(u);const h=Array.isArray(o.children)&&o.children.length===0;if(o.children&&!h)dn(o.children,u.pattern,t,r);else{const l=fr([...t],r.length);r.push(l)}t.pop()}}}return t.length?r:r.sort((i,a)=>a.score-i.score)}function at(n,e){for(let t=0,r=n.length;t<r;t++){const s=n[t].matcher(e);if(s)return s}return[]}function dr(n,e,t){const r=new URL(sn),s=J(h=>{const l=n();try{return new URL(l,r)}catch{return console.error(`Invalid path ${l}`),h}},r,{equals:(h,l)=>h.href===l.href}),i=J(()=>s().pathname),a=J(()=>s().search,!0),o=J(()=>s().hash),c=()=>"",u=St(a,()=>on(s()));return{get pathname(){return i()},get search(){return a()},get hash(){return o()},get state(){return e()},get key(){return c()},query:t?t(u):an(u)}}let _e;function pr(){return _e}function gr(n,e,t,r={}){const{signal:[s,i],utils:a={}}=n,o=a.parsePath||(k=>k),c=a.renderPath||(k=>k),u=a.beforeLeave||rn(),h=Ge("",r.base||"");if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!s().value&&i({value:h,replace:!0,scroll:!1});const[l,d]=v(!1);let g;const E=(k,_)=>{_.value===f()&&_.state===b()||(g===void 0&&d(!0),_e=k,g=_,In(()=>{g===_&&(y(g.value),w(g.state),Kn(),R[1]([]))}).finally(()=>{g===_&&Nn(()=>{_e=void 0,k==="navigate"&&oe(g),d(!1),g=void 0})}))},[f,y]=v(s().value),[b,w]=v(s().state),$=dr(f,b,a.queryWrapper),m=[],R=v([]),j=J(()=>typeof r.transformUrl=="function"?at(e(),r.transformUrl($.pathname)):at(e(),$.pathname)),K=()=>{const k=j(),_={};for(let q=0;q<k.length;q++)Object.assign(_,k[q].params);return _},L=a.paramsWrapper?a.paramsWrapper(K,e):an(K),Z={pattern:h,path:()=>h,outlet:()=>null,resolvePath(k){return Ge(h,k)}};return Y(St(s,k=>E("native",k),{defer:!0})),{base:Z,location:$,params:L,isRouting:l,renderPath:c,parsePath:o,navigatorFactory:ee,matches:j,beforeLeave:u,preloadRoute:ae,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:R};function ne(k,_,q){ie(()=>{if(typeof _=="number"){_&&(a.go?a.go(_):console.warn("Router integration does not support relative routing"));return}const B=!_||_[0]==="?",{replace:x,resolve:G,scroll:D,state:M}={replace:!1,resolve:!B,scroll:!0,...q},re=G?k.resolvePath(_):Ge(B&&$.pathname||"",_);if(re===void 0)throw new Error(`Path '${_}' is not a routable path`);if(m.length>=cr)throw new Error("Too many redirects");const U=f();(re!==U||M!==b())&&(Zn||u.confirm(re,q)&&(m.push({value:U,replace:x,scroll:D,state:b()}),E("navigate",{value:re,state:M})))})}function ee(k){return k=k||kt(un)||Z,(_,q)=>ne(k,_,q)}function oe(k){const _=m[0];_&&(i({...k,replace:_.replace,scroll:_.scroll}),m.length=0)}function ae(k,_){const q=at(e(),k.pathname),B=_e;_e="preload";for(let x in q){const{route:G,params:D}=q[x];G.component&&G.component.preload&&G.component.preload();const{preload:M}=G;_&&M&&zt(t(),()=>M({params:D,location:{pathname:k.pathname,search:k.search,hash:k.hash,query:on(k),state:null,key:""},intent:"preload"}))}_e=B}}function mr(n,e,t,r){const{base:s,location:i,params:a}=n,{pattern:o,component:c,preload:u}=r().route,h=J(()=>r().path);c&&c.preload&&c.preload();const l=u?u({params:a,location:i,intent:_e||"initial"}):void 0;return{parent:e,pattern:o,path:h,outlet:()=>c?S(c,{params:a,location:i,data:l,get children(){return t()}}):t(),resolvePath(g){return Ge(s.path(),g,h())}}}const yr=n=>e=>{const{base:t}=e,r=$t(()=>e.children),s=J(()=>dn(r(),e.base||""));let i;const a=gr(n,s,()=>i,{base:t,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return n.create&&n.create(a),S(ln.Provider,{value:a,get children(){return S(wr,{routerState:a,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[Ct(()=>(i=Kt())&&null),S(br,{routerState:a,get branches(){return s()}})]}})}})};function wr(n){const e=n.routerState.location,t=n.routerState.params,r=J(()=>n.preload&&ie(()=>{n.preload({params:t,location:e,intent:pr()||"initial"})}));return S(ye,{get when(){return n.root},keyed:!0,get fallback(){return n.children},children:s=>S(s,{params:t,location:e,get data(){return r()},get children(){return n.children}})})}function br(n){const e=[];let t;const r=J(St(n.routerState.matches,(s,i,a)=>{let o=i&&s.length===i.length;const c=[];for(let u=0,h=s.length;u<h;u++){const l=i&&i[u],d=s[u];a&&l&&d.route.key===l.route.key?c[u]=a[u]:(o=!1,e[u]&&e[u](),Te(g=>{e[u]=g,c[u]=mr(n.routerState,c[u-1]||n.routerState.base,Ut(()=>r()[u+1]),()=>n.routerState.matches()[u])}))}return e.splice(s.length).forEach(u=>u()),a&&o?a:(t=c[0],c)}));return Ut(()=>r()&&t)()}const Ut=n=>()=>S(ye,{get when(){return n()},keyed:!0,children:e=>S(un.Provider,{value:e,get children(){return e.outlet()}})}),be=n=>{const e=$t(()=>n.children);return Jn(n,{get children(){return e()}})};function _r([n,e],t,r){return[n,r?s=>e(r(s)):e]}function vr(n){let e=!1;const t=s=>typeof s=="string"?{value:s}:s,r=_r(v(t(n.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!e&&n.set(s),s));return n.init&&ke(n.init((s=n.get())=>{e=!0,r[1](t(s)),e=!1})),yr({signal:r,create:n.create,utils:n.utils})}function Sr(n,e,t){return n.addEventListener(e,t),()=>n.removeEventListener(e,t)}function Er(n,e){const t=n&&document.getElementById(n);t?t.scrollIntoView():e&&window.scrollTo(0,0)}const kr=new Map;function $r(n=!0,e=!1,t="/_server",r){return s=>{const i=s.base.path(),a=s.navigatorFactory(s.base);let o,c;function u(f){return f.namespaceURI==="http://www.w3.org/2000/svg"}function h(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const y=f.composedPath().find(j=>j instanceof Node&&j.nodeName.toUpperCase()==="A");if(!y||e&&!y.hasAttribute("link"))return;const b=u(y),w=b?y.href.baseVal:y.href;if((b?y.target.baseVal:y.target)||!w&&!y.hasAttribute("state"))return;const m=(y.getAttribute("rel")||"").split(/\s+/);if(y.hasAttribute("download")||m&&m.includes("external"))return;const R=b?new URL(w,document.baseURI):new URL(w);if(!(R.origin!==window.location.origin||i&&R.pathname&&!R.pathname.toLowerCase().startsWith(i.toLowerCase())))return[y,R]}function l(f){const y=h(f);if(!y)return;const[b,w]=y,$=s.parsePath(w.pathname+w.search+w.hash),m=b.getAttribute("state");f.preventDefault(),a($,{resolve:!1,replace:b.hasAttribute("replace"),scroll:!b.hasAttribute("noscroll"),state:m?JSON.parse(m):void 0})}function d(f){const y=h(f);if(!y)return;const[b,w]=y;r&&(w.pathname=r(w.pathname)),s.preloadRoute(w,b.getAttribute("preload")!=="false")}function g(f){clearTimeout(o);const y=h(f);if(!y)return c=null;const[b,w]=y;c!==b&&(r&&(w.pathname=r(w.pathname)),o=setTimeout(()=>{s.preloadRoute(w,b.getAttribute("preload")!=="false"),c=b},20))}function E(f){if(f.defaultPrevented)return;let y=f.submitter&&f.submitter.hasAttribute("formaction")?f.submitter.getAttribute("formaction"):f.target.getAttribute("action");if(!y)return;if(!y.startsWith("https://action/")){const w=new URL(y,sn);if(y=s.parsePath(w.pathname+w.search),!y.startsWith(t))return}if(f.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const b=kr.get(y);if(b){f.preventDefault();const w=new FormData(f.target,f.submitter);b.call({r:s,f:f.target},f.target.enctype==="multipart/form-data"?w:new URLSearchParams(w))}}ge(["click","submit"]),document.addEventListener("click",l),n&&(document.addEventListener("mousemove",g,{passive:!0}),document.addEventListener("focusin",d,{passive:!0}),document.addEventListener("touchstart",d,{passive:!0})),document.addEventListener("submit",E),ke(()=>{document.removeEventListener("click",l),n&&(document.removeEventListener("mousemove",g),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",E)})}}function pn(n){const e=()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,s=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:s}},t=rn();return vr({get:e,set({value:r,replace:s,scroll:i,state:a}){s?window.history.replaceState(er(a),"",r):window.history.pushState(a,"",r),Er(decodeURIComponent(window.location.hash.slice(1)),i),At()},init:r=>Sr(window,"popstate",tr(r,s=>{if(s&&s<0)return!t.confirm(s);{const i=e();return!t.confirm(i.value,{state:i.state})}})),create:$r(n.preload,n.explicitLinks,n.actionBase,n.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:t}})(n)}function Ce(n){const e=lr(),t=ur(),{href:r,state:s}=n,i=typeof r=="function"?r({navigate:e,location:t}):r;return e(i,{replace:!0,state:s}),null}const qt="/api";class F{static async login(e){const t=await fetch(`${qt}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const o=await t.json();throw new Error(o.message||"Login failed")}const r=await t.json(),s=t.headers.get("Authorization");let i="";return s&&s.startsWith("Bearer ")?i=s.substring(7):console.log("AuthService.login: No se encontró token en el header"),this.setToken(i),this.setUser(r),{access_token:i,user:r}}static async register(e){const t=await fetch(`${qt}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const o=await t.json();throw new Error(o.message||"Registration failed")}const r=await t.json(),s=t.headers.get("Authorization");let i="";return s&&s.startsWith("Bearer ")&&(i=s.substring(7)),this.setToken(i),this.setUser(r),{access_token:i,user:r}}static logout(){localStorage.removeItem("token"),localStorage.removeItem("user")}static setToken(e){localStorage.setItem("token",e)}static getToken(){let e=localStorage.getItem("token");if(!e){const t=this.getCurrentUser();t&&t.access_token&&(e=t.access_token,e&&this.setToken(e))}return e}static isAuthenticated(){const e=this.getToken();if(!e)return!1;try{return JSON.parse(atob(e.split(".")[1])).exp>Date.now()/1e3}catch{return!1}}static setUser(e){localStorage.setItem("user",JSON.stringify(e)),localStorage.getItem("user")}static getCurrentUser(){try{const e=localStorage.getItem("user");return!e||e==="undefined"||e==="null"?null:JSON.parse(e)}catch(e){return console.error("AuthService.getCurrentUser: Error parsing user:",e),null}}static getAuthHeaders(){const e=this.getToken(),t={"Content-Type":"application/json"};return e&&(t.Authorization=`Bearer ${e}`),t}}var Cr=I("<div class=toast-container>"),Ar=I("<div>");const gn=Et();function Rr(n){const[e,t]=v([]),r=a=>{const o=Math.random().toString(36).substring(2,9),c={...a,id:o};t(h=>[...h,c]);const u=a.duration||5e3;setTimeout(()=>{s(o)},u)},s=a=>{t(o=>o.filter(c=>c.id!==a))},i={toasts:e,addToast:r,removeToast:s};return S(gn.Provider,{value:i,get children(){return[Ct(()=>n==null?void 0:n.children),S(xr,{})]}})}function xr(){const{toasts:n,removeToast:e}=ve();return(()=>{var t=Cr();return P(t,S(en,{get each(){return n()},children:r=>(()=>{var s=Ar();return s.$$click=()=>e(r.id),P(s,()=>(r==null?void 0:r.message)??""),Y(()=>tn(s,`toast toast-${(r==null?void 0:r.type)??"info"}`)),s})()})),t})()}function ve(){const n=kt(gn);if(!n)throw new Error("useToast must be used within a ToastProvider");return n}ge(["click"]);var Tr=I("<div class=login-container><div class=login-form><h2>Iniciar Sesión</h2><form><div class=form-group><label for=email>Email:</label><input type=email id=email required></div><div class=form-group><label for=password>Contraseña:</label><input type=password id=password required></div><button type=submit></button></form><p>¿No tienes cuenta? <a href=/register>Regístrate aquí");function Or(n){const{addToast:e}=ve(),[t,r]=v(""),[s,i]=v(""),[a,o]=v(!1),c=async u=>{var h;u.preventDefault(),o(!0);try{const l=await F.login({email:t(),password:s()});(h=n==null?void 0:n.onLogin)==null||h.call(n,l.user),e({message:"Inicio de sesión exitoso",type:"success"}),window.location.href="/dashboard"}catch(l){console.error("Login error:",l),e({message:l instanceof Error?l.message:"Error al iniciar sesión",type:"error"})}finally{o(!1)}};return(()=>{var u=Tr(),h=u.firstChild,l=h.firstChild,d=l.nextSibling,g=d.firstChild,E=g.firstChild,f=E.nextSibling,y=g.nextSibling,b=y.firstChild,w=b.nextSibling,$=y.nextSibling;return d.addEventListener("submit",c),f.$$input=m=>r(m.currentTarget.value),w.$$input=m=>i(m.currentTarget.value),P($,()=>a()?"Iniciando sesión...":"Iniciar Sesión"),Y(()=>$.disabled=a()),Y(()=>f.value=t()),Y(()=>w.value=s()),u})()}ge(["input"]);var Pr=I("<div class=register-container><div class=register-form><h2>Registrarse</h2><form><div class=form-group><label for=name>Nombre:</label><input type=text id=name required></div><div class=form-group><label for=email>Email:</label><input type=email id=email required></div><div class=form-group><label for=password>Contraseña:</label><input type=password id=password required></div><button type=submit></button></form><p>¿Ya tienes cuenta? <a href=/login>Inicia sesión aquí");function Lr(){const{addToast:n}=ve(),[e,t]=v(""),[r,s]=v(""),[i,a]=v(""),[o,c]=v(!1),u=async h=>{h.preventDefault(),c(!0);try{await F.register({name:e(),email:r(),password:i()}),n({message:"Registro exitoso",type:"success"}),window.location.href="/dashboard"}catch(l){console.error("Register error:",l),n({message:l instanceof Error?l.message:"Error al registrarse",type:"error"})}finally{c(!1)}};return(()=>{var h=Pr(),l=h.firstChild,d=l.firstChild,g=d.nextSibling,E=g.firstChild,f=E.firstChild,y=f.nextSibling,b=E.nextSibling,w=b.firstChild,$=w.nextSibling,m=b.nextSibling,R=m.firstChild,j=R.nextSibling,K=m.nextSibling;return g.addEventListener("submit",u),y.$$input=L=>t(L.currentTarget.value),$.$$input=L=>s(L.currentTarget.value),j.$$input=L=>a(L.currentTarget.value),P(K,()=>o()?"Registrando...":"Registrarse"),Y(()=>K.disabled=o()),Y(()=>y.value=e()),Y(()=>$.value=r()),Y(()=>j.value=i()),h})()}ge(["input"]);const X="/api";class Qe{static async getGames(){const e=await fetch(`${X}/games`,{headers:F.getAuthHeaders()});if(!e.ok)throw new Error("Failed to fetch games");return e.json()}static async getGame(e){const t=await fetch(`${X}/games/${e}`,{headers:F.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch game");return t.json()}static async createGame(e){const t=await fetch(`${X}/games`,{method:"POST",headers:F.getAuthHeaders(),body:JSON.stringify(e)});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to create game")}return t.json()}static async updateGame(e,t){const r=await fetch(`${X}/games/${e}`,{method:"PATCH",headers:F.getAuthHeaders(),body:JSON.stringify(t)});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to update game")}return r.json()}static async deleteGame(e){const t=await fetch(`${X}/games/${e}`,{method:"DELETE",headers:F.getAuthHeaders()});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to delete game")}}static async joinGame(e){const t=await fetch(`${X}/games/${e}/join`,{method:"POST",headers:F.getAuthHeaders()});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to join game")}}static async leaveGame(e){const t=await fetch(`${X}/games/${e}/leave`,{method:"POST",headers:F.getAuthHeaders()});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to leave game")}}static async getGameResults(e){const t=await fetch(`${X}/games/${e}/results`,{headers:F.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch game results");return t.json()}static async getGamePlayers(e){const t=await fetch(`${X}/games/${e}/players`,{headers:F.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch game players");return t.json()}static async startGame(e){const t=await fetch(`${X}/games/${e}/start`,{method:"POST",headers:F.getAuthHeaders()});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to start game")}}static async pauseGame(e){const t=await fetch(`${X}/games/${e}/pause`,{method:"POST",headers:F.getAuthHeaders()});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to pause game")}}static async resumeGame(e){const t=await fetch(`${X}/games/${e}/resume`,{method:"POST",headers:F.getAuthHeaders()});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to resume game")}}static async endGame(e){const t=await fetch(`${X}/games/${e}/end`,{method:"POST",headers:F.getAuthHeaders()});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to end game")}}static async restartGame(e){const t=await fetch(`${X}/games/${e}/restart`,{method:"POST",headers:F.getAuthHeaders()});if(!t.ok){const r=await t.json();throw new Error(r.message||"Failed to restart game")}}static async addTime(e,t){const r=await fetch(`${X}/games/${e}/add-time`,{method:"POST",headers:F.getAuthHeaders(),body:JSON.stringify({seconds:t})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to add time")}}static async updateGameTime(e,t){const r=await fetch(`${X}/games/${e}/update-time`,{method:"POST",headers:F.getAuthHeaders(),body:JSON.stringify({timeInSeconds:t})});if(!r.ok){const s=await r.json();throw new Error(s.message||"Failed to update game time")}}}var Nr=I("<div>TEST: Dashboard está renderizando"),Br=I("<div class=games-grid><div>Games count: "),Ir=I("<div class=dashboard-container><div class=dashboard-header><h1>Dashboard</h1><div class=dashboard-actions><button>Crear Juego"),Dr=I("<div>Cargando juegos..."),Ur=I("<div class=game-card><h3></h3><p></p><p>Estado: <span></span></p><p>Jugadores: </p><div class=game-actions>"),qr=I("<button>Gestionar"),Gr=I("<button>Unirse"),Fr=I("<div>Render error: ");function jr(n){console.log("Dashboard component rendering, currentUser:",n==null?void 0:n.currentUser);const{addToast:e}=ve(),[t,r]=v([]),[s,i]=v(!0),[a,o]=v(!1);Wt(()=>{console.log("Dashboard onMount called"),a()||(console.log("Loading games..."),c(),o(!0))});const c=async()=>{try{console.log("Calling GameService.getGames()...");const d=await Qe.getGames();console.log("Games data received:",d),r(d),console.log("Games state updated, games count:",t().length)}catch(d){console.error("Error loading games:",d),e({message:"Error al cargar los juegos",type:"error"})}finally{i(!1),console.log("Loading set to false")}},u=()=>{window.location.href="/create-game"},h=d=>{window.location.href=`/player/${d}`},l=d=>{window.location.href=`/owner/${d}`};console.log("Dashboard render - loading:",s(),"games count:",t().length);try{return console.log("Dashboard rendering start"),console.log("Games data:",t()),console.log("Loading state:",s()),[(()=>{var d=Nr();return z(d,"background","red"),z(d,"color","white"),z(d,"padding","20px"),z(d,"margin","10px"),d})(),(()=>{var d=Ir(),g=d.firstChild,E=g.firstChild,f=E.nextSibling,y=f.firstChild;return y.$$click=u,P(d,S(ye,{get when(){return!s()},get fallback(){return Dr()},get children(){var b=Br(),w=b.firstChild,$=w.firstChild;return z(w,"background","yellow"),z(w,"padding","10px"),z(w,"margin","5px"),P(w,()=>t().length,null),P(b,S(en,{get each(){return t()},children:m=>(()=>{var R=Ur(),j=R.firstChild,K=j.nextSibling,L=K.nextSibling,Z=L.firstChild,ne=Z.nextSibling,ee=L.nextSibling,oe=ee.firstChild,ae=ee.nextSibling;return P(j,()=>(m==null?void 0:m.name)||"Juego sin nombre"),P(K,()=>(m==null?void 0:m.description)||"Sin descripción"),P(ne,()=>(m==null?void 0:m.status)||"unknown"),P(ee,()=>(m==null?void 0:m.activeConnections)||0,null),P(ae,(()=>{var k=Ct(()=>{var _,q;return((_=m==null?void 0:m.owner)==null?void 0:_.id)===((q=n==null?void 0:n.currentUser)==null?void 0:q.id)});return()=>k()?(()=>{var _=qr();return _.$$click=()=>l(m==null?void 0:m.id),_})():(()=>{var _=Gr();return _.$$click=()=>h(m==null?void 0:m.id),_})()})()),Y(()=>tn(ne,`game-status status-${(m==null?void 0:m.status)||"unknown"}`)),R})()}),null),b}}),null),d})()]}catch(d){return console.error("Dashboard render error:",d),(()=>{var g=Fr();return g.firstChild,z(g,"color","red"),P(g,()=>d.message,null),g})()}}ge(["click"]);var Mr=I("<div class=dashboard-container><h1>Crear Nuevo Juego</h1><form style=max-width:500px;margin-top:2rem><div class=form-group><label for=name>Nombre del Juego:</label><input type=text id=name required></div><div class=form-group><label for=description>Descripción:</label><textarea id=description rows=4></textarea></div><button type=submit>");function Hr(n){const{addToast:e}=ve(),[t,r]=v(""),[s,i]=v(""),[a,o]=v(!1),c=async u=>{var h;u.preventDefault(),o(!0);try{const l=await Qe.createGame({name:t(),description:s(),ownerId:(h=n==null?void 0:n.currentUser)==null?void 0:h.id});e({message:"Juego creado exitosamente",type:"success"}),window.location.href=`/owner/${(l==null?void 0:l.id)??""}`}catch(l){console.error("Create game error:",l),e({message:l instanceof Error?l.message:"Error al crear el juego",type:"error"})}finally{o(!1)}};return(()=>{var u=Mr(),h=u.firstChild,l=h.nextSibling,d=l.firstChild,g=d.firstChild,E=g.nextSibling,f=d.nextSibling,y=f.firstChild,b=y.nextSibling,w=f.nextSibling;return l.addEventListener("submit",c),E.$$input=$=>r($.currentTarget.value),b.$$input=$=>i($.currentTarget.value),P(w,()=>a()?"Creando juego...":"Crear Juego"),Y(()=>w.disabled=a()),Y(()=>E.value=t()),Y(()=>b.value=s()),u})()}ge(["input"]);const de=Object.create(null);de.open="0";de.close="1";de.ping="2";de.pong="3";de.message="4";de.upgrade="5";de.noop="6";const Fe=Object.create(null);Object.keys(de).forEach(n=>{Fe[de[n]]=n});const gt={type:"error",data:"parser error"},mn=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",yn=typeof ArrayBuffer=="function",wn=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer,xt=({type:n,data:e},t,r)=>mn&&e instanceof Blob?t?r(e):Gt(e,r):yn&&(e instanceof ArrayBuffer||wn(e))?t?r(e):Gt(new Blob([e]),r):r(de[n]+(e||"")),Gt=(n,e)=>{const t=new FileReader;return t.onload=function(){const r=t.result.split(",")[1];e("b"+(r||""))},t.readAsDataURL(n)};function Ft(n){return n instanceof Uint8Array?n:n instanceof ArrayBuffer?new Uint8Array(n):new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}let ct;function Vr(n,e){if(mn&&n.data instanceof Blob)return n.data.arrayBuffer().then(Ft).then(e);if(yn&&(n.data instanceof ArrayBuffer||wn(n.data)))return e(Ft(n.data));xt(n,!1,t=>{ct||(ct=new TextEncoder),e(ct.encode(t))})}const jt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Re=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let n=0;n<jt.length;n++)Re[jt.charCodeAt(n)]=n;const Jr=n=>{let e=n.length*.75,t=n.length,r,s=0,i,a,o,c;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);const u=new ArrayBuffer(e),h=new Uint8Array(u);for(r=0;r<t;r+=4)i=Re[n.charCodeAt(r)],a=Re[n.charCodeAt(r+1)],o=Re[n.charCodeAt(r+2)],c=Re[n.charCodeAt(r+3)],h[s++]=i<<2|a>>4,h[s++]=(a&15)<<4|o>>2,h[s++]=(o&3)<<6|c&63;return u},Wr=typeof ArrayBuffer=="function",Tt=(n,e)=>{if(typeof n!="string")return{type:"message",data:bn(n,e)};const t=n.charAt(0);return t==="b"?{type:"message",data:Kr(n.substring(1),e)}:Fe[t]?n.length>1?{type:Fe[t],data:n.substring(1)}:{type:Fe[t]}:gt},Kr=(n,e)=>{if(Wr){const t=Jr(n);return bn(t,e)}else return{base64:!0,data:n}},bn=(n,e)=>{switch(e){case"blob":return n instanceof Blob?n:new Blob([n]);case"arraybuffer":default:return n instanceof ArrayBuffer?n:n.buffer}},_n="",zr=(n,e)=>{const t=n.length,r=new Array(t);let s=0;n.forEach((i,a)=>{xt(i,!1,o=>{r[a]=o,++s===t&&e(r.join(_n))})})},Yr=(n,e)=>{const t=n.split(_n),r=[];for(let s=0;s<t.length;s++){const i=Tt(t[s],e);if(r.push(i),i.type==="error")break}return r};function Xr(){return new TransformStream({transform(n,e){Vr(n,t=>{const r=t.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}n.data&&typeof n.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let lt;function Ue(n){return n.reduce((e,t)=>e+t.length,0)}function qe(n,e){if(n[0].length===e)return n.shift();const t=new Uint8Array(e);let r=0;for(let s=0;s<e;s++)t[s]=n[0][r++],r===n[0].length&&(n.shift(),r=0);return n.length&&r<n[0].length&&(n[0]=n[0].slice(r)),t}function Qr(n,e){lt||(lt=new TextDecoder);const t=[];let r=0,s=-1,i=!1;return new TransformStream({transform(a,o){for(t.push(a);;){if(r===0){if(Ue(t)<1)break;const c=qe(t,1);i=(c[0]&128)===128,s=c[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(Ue(t)<2)break;const c=qe(t,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ue(t)<8)break;const c=qe(t,8),u=new DataView(c.buffer,c.byteOffset,c.length),h=u.getUint32(0);if(h>Math.pow(2,21)-1){o.enqueue(gt);break}s=h*Math.pow(2,32)+u.getUint32(4),r=3}else{if(Ue(t)<s)break;const c=qe(t,s);o.enqueue(Tt(i?c:lt.decode(c),e)),r=0}if(s===0||s>n){o.enqueue(gt);break}}}})}const vn=4;function V(n){if(n)return Zr(n)}function Zr(n){for(var e in V.prototype)n[e]=V.prototype[e];return n}V.prototype.on=V.prototype.addEventListener=function(n,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(e),this};V.prototype.once=function(n,e){function t(){this.off(n,t),e.apply(this,arguments)}return t.fn=e,this.on(n,t),this};V.prototype.off=V.prototype.removeListener=V.prototype.removeAllListeners=V.prototype.removeEventListener=function(n,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+n];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var r,s=0;s<t.length;s++)if(r=t[s],r===e||r.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+n],this};V.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+n],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t){t=t.slice(0);for(var r=0,s=t.length;r<s;++r)t[r].apply(this,e)}return this};V.prototype.emitReserved=V.prototype.emit;V.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]};V.prototype.hasListeners=function(n){return!!this.listeners(n).length};const Ze=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ce=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),es="arraybuffer";function Sn(n,...e){return e.reduce((t,r)=>(n.hasOwnProperty(r)&&(t[r]=n[r]),t),{})}const ts=ce.setTimeout,ns=ce.clearTimeout;function et(n,e){e.useNativeTimers?(n.setTimeoutFn=ts.bind(ce),n.clearTimeoutFn=ns.bind(ce)):(n.setTimeoutFn=ce.setTimeout.bind(ce),n.clearTimeoutFn=ce.clearTimeout.bind(ce))}const rs=1.33;function ss(n){return typeof n=="string"?is(n):Math.ceil((n.byteLength||n.size)*rs)}function is(n){let e=0,t=0;for(let r=0,s=n.length;r<s;r++)e=n.charCodeAt(r),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(r++,t+=4);return t}function En(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function os(n){let e="";for(let t in n)n.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return e}function as(n){let e={},t=n.split("&");for(let r=0,s=t.length;r<s;r++){let i=t[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class cs extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class Ot extends V{constructor(e){super(),this.writable=!1,et(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,r){return super.emitReserved("error",new cs(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Tt(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=os(e);return t.length?"?"+t:""}}class ls extends Ot{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Yr(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,zr(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=En()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let kn=!1;try{kn=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const us=kn;function hs(){}class fs extends ls{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let r=location.port;r||(r=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,t){const r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,r)=>{this.onError("xhr poll error",t,r)}),this.pollXhr=e}}class fe extends V{constructor(e,t,r){super(),this.createRequest=e,et(this,r),this._opts=r,this._method=r.method||"GET",this._uri=t,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const t=Sn(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(t);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=fe.requestsCount++,fe.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=hs,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete fe.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}fe.requestsCount=0;fe.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Mt);else if(typeof addEventListener=="function"){const n="onpagehide"in ce?"pagehide":"unload";addEventListener(n,Mt,!1)}}function Mt(){for(let n in fe.requests)fe.requests.hasOwnProperty(n)&&fe.requests[n].abort()}const ds=function(){const n=$n({xdomain:!1});return n&&n.responseType!==null}();class ps extends fs{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=ds&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new fe($n,this.uri(),e)}}function $n(n){const e=n.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||us))return new XMLHttpRequest}catch{}if(!e)try{return new ce[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Cn=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class gs extends Ot{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,r=Cn?{}:Sn(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],s=t===e.length-1;xt(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}s&&Ze(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=En()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const ut=ce.WebSocket||ce.MozWebSocket;class ms extends gs{createSocket(e,t,r){return Cn?new ut(e,t,r):t?new ut(e,t):new ut(e)}doWrite(e,t){this.ws.send(t)}}class ys extends Ot{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Qr(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(t).getReader(),s=Xr();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{r.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const r=e[t],s=t===e.length-1;this._writer.write(r).then(()=>{s&&Ze(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ws={websocket:ms,webtransport:ys,polling:ps},bs=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function mt(n){if(n.length>8e3)throw"URI too long";const e=n,t=n.indexOf("["),r=n.indexOf("]");t!=-1&&r!=-1&&(n=n.substring(0,t)+n.substring(t,r).replace(/:/g,";")+n.substring(r,n.length));let s=bs.exec(n||""),i={},a=14;for(;a--;)i[_s[a]]=s[a]||"";return t!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=vs(i,i.path),i.queryKey=Ss(i,i.query),i}function vs(n,e){const t=/\/{2,9}/g,r=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function Ss(n,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,i){s&&(t[s]=i)}),t}const yt=typeof addEventListener=="function"&&typeof removeEventListener=="function",je=[];yt&&addEventListener("offline",()=>{je.forEach(n=>n())},!1);class me extends V{constructor(e,t){if(super(),this.binaryType=es,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const r=mt(e);t.hostname=r.host,t.secure=r.protocol==="https"||r.protocol==="wss",t.port=r.port,r.query&&(t.query=r.query)}else t.host&&(t.hostname=mt(t.host).host);et(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=as(this.opts.query)),yt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},je.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=vn,t.transport=e,this.id&&(t.sid=this.id);const r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&me.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",me.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(t+=ss(s)),r>0&&t>this._maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ze(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,r){return this._sendPacket("message",e,t,r),this}send(e,t,r){return this._sendPacket("message",e,t,r),this}_sendPacket(e,t,r,s){if(typeof t=="function"&&(s=t,t=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:t,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(me.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),yt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=je.indexOf(this._offlineEventListener);r!==-1&&je.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}me.protocol=vn;class Es extends me{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),r=!1;me.priorWebsocketSuccess=!1;const s=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",l=>{if(!r)if(l.type==="pong"&&l.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;me.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(h(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function i(){r||(r=!0,h(),t.close(),t=null)}const a=l=>{const d=new Error("probe error: "+l);d.transport=t.name,i(),this.emitReserved("upgradeError",d)};function o(){a("transport closed")}function c(){a("socket closed")}function u(l){t&&l.name!==t.name&&i()}const h=()=>{t.removeListener("open",s),t.removeListener("error",a),t.removeListener("close",o),this.off("close",c),this.off("upgrading",u)};t.once("open",s),t.once("error",a),t.once("close",o),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}let ks=class extends Es{constructor(e,t={}){const r=typeof e=="object"?e:t;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>ws[s]).filter(s=>!!s)),super(e,r)}};function $s(n,e="",t){let r=n;t=t||typeof location<"u"&&location,n==null&&(n=t.protocol+"//"+t.host),typeof n=="string"&&(n.charAt(0)==="/"&&(n.charAt(1)==="/"?n=t.protocol+n:n=t.host+n),/^(https?|wss?):\/\//.test(n)||(typeof t<"u"?n=t.protocol+"//"+n:n="https://"+n),r=mt(n)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(t&&t.port===r.port?"":":"+r.port),r}const Cs=typeof ArrayBuffer=="function",As=n=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(n):n.buffer instanceof ArrayBuffer,An=Object.prototype.toString,Rs=typeof Blob=="function"||typeof Blob<"u"&&An.call(Blob)==="[object BlobConstructor]",xs=typeof File=="function"||typeof File<"u"&&An.call(File)==="[object FileConstructor]";function Pt(n){return Cs&&(n instanceof ArrayBuffer||As(n))||Rs&&n instanceof Blob||xs&&n instanceof File}function Me(n,e){if(!n||typeof n!="object")return!1;if(Array.isArray(n)){for(let t=0,r=n.length;t<r;t++)if(Me(n[t]))return!0;return!1}if(Pt(n))return!0;if(n.toJSON&&typeof n.toJSON=="function"&&arguments.length===1)return Me(n.toJSON(),!0);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&Me(n[t]))return!0;return!1}function Ts(n){const e=[],t=n.data,r=n;return r.data=wt(t,e),r.attachments=e.length,{packet:r,buffers:e}}function wt(n,e){if(!n)return n;if(Pt(n)){const t={_placeholder:!0,num:e.length};return e.push(n),t}else if(Array.isArray(n)){const t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=wt(n[r],e);return t}else if(typeof n=="object"&&!(n instanceof Date)){const t={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=wt(n[r],e));return t}return n}function Os(n,e){return n.data=bt(n.data,e),delete n.attachments,n}function bt(n,e){if(!n)return n;if(n&&n._placeholder===!0){if(typeof n.num=="number"&&n.num>=0&&n.num<e.length)return e[n.num];throw new Error("illegal attachments")}else if(Array.isArray(n))for(let t=0;t<n.length;t++)n[t]=bt(n[t],e);else if(typeof n=="object")for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=bt(n[t],e));return n}const Ps=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ls=5;var A;(function(n){n[n.CONNECT=0]="CONNECT",n[n.DISCONNECT=1]="DISCONNECT",n[n.EVENT=2]="EVENT",n[n.ACK=3]="ACK",n[n.CONNECT_ERROR=4]="CONNECT_ERROR",n[n.BINARY_EVENT=5]="BINARY_EVENT",n[n.BINARY_ACK=6]="BINARY_ACK"})(A||(A={}));class Ns{constructor(e){this.replacer=e}encode(e){return(e.type===A.EVENT||e.type===A.ACK)&&Me(e)?this.encodeAsBinary({type:e.type===A.EVENT?A.BINARY_EVENT:A.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===A.BINARY_EVENT||e.type===A.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Ts(e),r=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(r),s}}function Ht(n){return Object.prototype.toString.call(n)==="[object Object]"}class Lt extends V{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const r=t.type===A.BINARY_EVENT;r||t.type===A.BINARY_ACK?(t.type=r?A.EVENT:A.ACK,this.reconstructor=new Bs(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Pt(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const r={type:Number(e.charAt(0))};if(A[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===A.BINARY_EVENT||r.type===A.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const a=e.substring(i,t);if(a!=Number(a)||e.charAt(t)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););r.nsp=e.substring(i,t)}else r.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const i=t+1;for(;++t;){const a=e.charAt(t);if(a==null||Number(a)!=a){--t;break}if(t===e.length)break}r.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(Lt.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case A.CONNECT:return Ht(t);case A.DISCONNECT:return t===void 0;case A.CONNECT_ERROR:return typeof t=="string"||Ht(t);case A.EVENT:case A.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&Ps.indexOf(t[0])===-1);case A.ACK:case A.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Bs{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=Os(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Is=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Lt,Encoder:Ns,get PacketType(){return A},protocol:Ls},Symbol.toStringTag,{value:"Module"}));function ue(n,e,t){return n.on(e,t),function(){n.off(e,t)}}const Ds=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Rn extends V{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[ue(e,"open",this.onopen.bind(this)),ue(e,"packet",this.onpacket.bind(this)),ue(e,"error",this.onerror.bind(this)),ue(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var r,s,i;if(Ds.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:A.EVENT,data:t};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const h=this.ids++,l=t.pop();this._registerAckCallback(h,l),a.id=h}const o=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);t.call(this,new Error("operation has timed out"))},s),a=(...o)=>{this.io.clearTimeoutFn(i),t.apply(this,o)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((r,s)=>{const i=(a,o)=>a?s(a):r(o);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:A.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case A.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case A.EVENT:case A.BINARY_EVENT:this.onevent(e);break;case A.ACK:case A.BINARY_ACK:this.onack(e);break;case A.DISCONNECT:this.ondisconnect();break;case A.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let r=!1;return function(...s){r||(r=!0,t.packet({type:A.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:A.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r])return t.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const r of t)r.apply(this,e.data)}}}function $e(n){n=n||{},this.ms=n.min||100,this.max=n.max||1e4,this.factor=n.factor||2,this.jitter=n.jitter>0&&n.jitter<=1?n.jitter:0,this.attempts=0}$e.prototype.duration=function(){var n=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*n);n=Math.floor(e*10)&1?n+t:n-t}return Math.min(n,this.max)|0};$e.prototype.reset=function(){this.attempts=0};$e.prototype.setMin=function(n){this.ms=n};$e.prototype.setMax=function(n){this.max=n};$e.prototype.setJitter=function(n){this.jitter=n};class _t extends V{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,et(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((r=t.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new $e({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||Is;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ks(this.uri,this.opts);const t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=ue(t,"open",function(){r.onopen(),e&&e()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},a=ue(t,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),t.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(ue(e,"ping",this.onping.bind(this)),ue(e,"data",this.ondata.bind(this)),ue(e,"error",this.onerror.bind(this)),ue(e,"close",this.onclose.bind(this)),ue(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Ze(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new Rn(this,e,t),this.nsps[e]=r),r}_destroy(e){const t=Object.keys(this.nsps);for(const r of t)if(this.nsps[r].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Ae={};function Pe(n,e){typeof n=="object"&&(e=n,n=void 0),e=e||{};const t=$s(n,e.path||"/socket.io"),r=t.source,s=t.id,i=t.path,a=Ae[s]&&i in Ae[s].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return o?c=new _t(r,e):(Ae[s]||(Ae[s]=new _t(r,e)),c=Ae[s]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(Pe,{Manager:_t,Socket:Rn,io:Pe,connect:Pe});const Us=(n,e)=>{const[t,r]=v(null),[s,i]=v(null),[a,o]=v(!0),[c,u]=v(!1),h=p=>{},l={current:null},d={current:null},g={current:null},E={current:null},f={current:null},y={current:null},[b]=v(new Map),[w]=v(new Map),[$]=v(new Map),[m]=v(new Map);Je(()=>{let p=!0;if((async()=>{try{const O=await F.getCurrentUser();if(!p)return;if(!O){window.location.href="/login";return}if(!n){e({message:"ID de juego no válido",type:"error"}),window.location.href="/dashboard";return}const se=await Qe.getGame(parseInt(n));if(!p)return;if(!se){e({message:"Juego no encontrado",type:"error"}),window.location.href="/dashboard";return}if(se.owner.id!==O.id){e({message:"No tienes permisos para ver este juego",type:"error"}),window.location.href="/dashboard";return}r(O),y.current=O,i(se)}catch(O){if(!p)return;console.error("Error initializing game:",O),e({message:"Error al cargar el juego",type:"error"}),window.location.href="/dashboard"}finally{p&&o(!1)}})(),n&&!f.current){const O=F.getToken(),Ie=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}`,le=Pe(Ie,{auth:{token:O}});f.current=le,le.on("connect",()=>{le.emit("joinGame",{gameId:parseInt(n)})}),le.on("gameUpdate",W=>{W.game&&(i(W.game),W.game.status==="finished"&&setTimeout(()=>{u(!0)},1e3))}),le.on("joinSuccess",W=>{W.user&&(r(W.user),y.current=W.user)}),le.on("gameActionError",W=>{console.error(`Game action error (${W.action}):`,W.error),e({message:`Error: ${W.error}`,type:"error"})}),le.on("connect_error",W=>{console.error("WebSocket connection error:",W)}),le.on("disconnect",W=>{(W==="io server disconnect"||W==="transport close")&&e({message:"Conexión perdida con el servidor",type:"error"})})}ke(()=>{p=!1,f.current&&f.current.disconnect()})});const R=()=>{const p=s();if(!(!p||!f.current))try{f.current.emit("gameAction",{gameId:p.id,action:"startGame"}),e({message:"Juego iniciado",type:"success"})}catch(T){console.error("Error starting game:",T),e({message:"Error al iniciar el juego",type:"error"})}},j=()=>{const p=s();if(!(!p||!f.current))try{f.current.emit("gameAction",{gameId:p.id,action:"pauseGame"}),e({message:"Juego pausado",type:"success"})}catch(T){console.error("Error pausing game:",T),e({message:"Error al pausar el juego",type:"error"})}},K=()=>{const p=s();if(!(!p||!f.current))try{f.current.emit("gameAction",{gameId:p.id,action:"resumeGame"}),e({message:"Juego reanudado",type:"success"})}catch(T){console.error("Error resuming game:",T),e({message:"Error al reanudar el juego",type:"error"})}},L=()=>{const p=s();if(!(!p||!f.current))try{f.current.emit("gameAction",{gameId:p.id,action:"endGame"}),e({message:"Juego finalizado",type:"success"})}catch(T){console.error("Error ending game:",T),e({message:"Error al finalizar el juego",type:"error"})}},Z=()=>{const p=s();if(!(!p||!f.current))try{f.current.emit("gameAction",{gameId:p.id,action:"restartGame"}),e({message:"Juego reiniciado",type:"success"})}catch(T){console.error("Error restarting game:",T),e({message:"Error al reiniciar el juego",type:"error"})}},ne=p=>{const T=s();if(!(!T||!f.current))try{f.current.emit("gameAction",{gameId:T.id,action:"addTime",data:{seconds:p}});const O=p/60;e({message:`Se agregaron ${O} minutos al juego`,type:"success"})}catch(O){console.error("Error adding time:",O),e({message:"Error al añadir tiempo",type:"error"})}},ee=p=>{const T=s();if(!(!T||!f.current))try{f.current.emit("gameAction",{gameId:T.id,action:"updateGameTime",data:{timeInSeconds:p}});let O="indefinido";p>0&&(O=`${p/60} min`),e({message:`Tiempo del juego actualizado: ${O}`,type:"success"})}catch(O){console.error("Error updating game time:",O),e({message:"Error al actualizar el tiempo",type:"error"})}},oe=()=>{window.location.href="/dashboard"},ae=()=>{window.location.reload()},k=()=>{},_=()=>{s()},q=()=>{},B=()=>{e({message:"Funcionalidad de edición de nombre no implementada aún",type:"info"})},x=(p,T)=>{const O=s();if(!f.current||!O)return;const se=`Punto ${Math.round(p*1e4)}-${Math.round(T*1e4)}`;f.current.emit("gameAction",{gameId:O.id,action:"createControlPoint",data:{name:se,description:"",latitude:p,longitude:T,gameId:O.id}}),e({message:"Punto de control creado",type:"success"})},G=p=>{},D=(p,T)=>{},M=p=>{const T=s();!T||!f.current||f.current.emit("gameAction",{gameId:T.id,action:"updateTeamCount",data:{teamCount:p}})},re=()=>{u(!0)},U=()=>{u(!1)};return{currentUser:t,currentGame:s,isLoading:a,mapRef:h,mapInstanceRef:l,userMarkerRef:d,playerMarkersRef:g,controlPointMarkersRef:E,socket:f.current,startGame:R,pauseGame:j,resumeGame:K,endGame:L,restartGame:Z,addTime:ne,updateGameTime:ee,goBack:oe,reloadPage:ae,centerOnUser:k,centerOnSite:_,openTeamsDialog:q,enableGameNameEdit:B,createControlPoint:x,handleMapClick:G,controlPointMarkers:b(),positionCircles:w(),pieCharts:$(),enableDragMode:D,updateTeamCount:M,playerMarkers:m(),isGameResultsDialogOpen:c,openGameResultsDialog:re,closeGameResultsDialog:U}};var qs=I("<div class=loading>Cargando juego..."),Gs=I("<div class=loading>Error al cargar el juego"),Fs=I("<div class=players-dialog><h3>Gestión de Equipos</h3><p>Diálogo de equipos en desarrollo</p><button>Cerrar"),js=I("<div class=game-results-dialog><h3>Resultados del Juego</h3><p>Diálogo de resultados en desarrollo</p><button>Cerrar"),Ms=I("<div class=game-owner-container><div class=map-container></div><div><div></div><div><div class=game-overlay><h3></h3><p>Estado: </p><p>Jugadores: </p></div><div class=location-info><p>Información de ubicación</p></div></div><div class=map-controls><button>Volver</button><button>Recargar</button><button>Centrar en mí</button><button>Centrar en sitio</button><button>Equipos</button><button>Resultados</button></div></div><div class=control-panel><button>Iniciar</button><button>Pausar</button><button>Reanudar</button><button>Finalizar</button><button>Reiniciar</button><button>+5 min");function Hs(n){const{addToast:e}=ve(),[t,r]=v(!1),s=L=>{e({message:L.message,type:L.type})},i=()=>{r(!0)},a=()=>{r(!1)},{currentUser:o,currentGame:c,isLoading:u,mapRef:h,startGame:l,pauseGame:d,resumeGame:g,endGame:E,restartGame:f,addTime:y,goBack:b,reloadPage:w,centerOnUser:$,centerOnSite:m,isGameResultsDialogOpen:R,openGameResultsDialog:j,closeGameResultsDialog:K}=Us((n==null?void 0:n.gameId)??"",s);return u()?qs():!c()||!o()?Gs():(()=>{var L=Ms(),Z=L.firstChild,ne=Z.nextSibling,ee=ne.firstChild,oe=ee.nextSibling,ae=oe.firstChild,k=ae.firstChild,_=k.nextSibling;_.firstChild;var q=_.nextSibling;q.firstChild;var B=oe.nextSibling,x=B.firstChild,G=x.nextSibling,D=G.nextSibling,M=D.nextSibling,re=M.nextSibling,U=re.nextSibling,p=ne.nextSibling,T=p.firstChild,O=T.nextSibling,se=O.nextSibling,Ie=se.nextSibling,le=Ie.nextSibling,W=le.nextSibling;return nn(h,Z),P(k,()=>{var te;return(te=c())==null?void 0:te.name}),P(_,()=>{var te;return(te=c())==null?void 0:te.status},null),P(q,()=>{var te;return(te=c())==null?void 0:te.activeConnections},null),H(x,"click",b),H(G,"click",w),H(D,"click",$),H(M,"click",m),re.$$click=i,H(U,"click",j),H(T,"click",l),H(O,"click",d),H(se,"click",g),H(Ie,"click",E),H(le,"click",f),W.$$click=()=>y(300),P(L,S(ye,{get when(){return t()},get children(){var te=Fs(),tt=te.firstChild,nt=tt.nextSibling,rt=nt.nextSibling;return rt.$$click=a,te}}),null),P(L,S(ye,{get when(){return R()},get children(){var te=js(),tt=te.firstChild,nt=tt.nextSibling,rt=nt.nextSibling;return H(rt,"click",K),te}}),null),L})()}ge(["click"]);const Vs=(n,e)=>{const[t,r]=v(null),[s,i]=v(null),[a,o]=v(!0),[c,u]=v(!1),[h,l]=v(!1),[d,g]=v(!1),[E,f]=v(!1),y=x=>{},b={current:null},w={current:null},$={current:null},m={current:null},R={current:null},j={current:null},[K]=v(new Map),[L]=v(new Map),[Z]=v(new Map);Je(()=>{let x=!0;if((async()=>{try{const D=await F.getCurrentUser();if(!x)return;if(!D){window.location.href="/login";return}if(!n){e({message:"ID de juego no válido",type:"error"}),window.location.href="/dashboard";return}const M=await Qe.getGame(parseInt(n));if(!x)return;if(!M){e({message:"Juego no encontrado",type:"error"}),window.location.href="/dashboard";return}r(D),j.current=D,i(M),window.currentGame=M}catch(D){if(!x)return;console.error("Error initializing game:",D),e({message:"Error al cargar el juego",type:"error"}),window.location.href="/dashboard"}finally{x&&o(!1)}})(),n&&!R.current){const D=F.getToken(),re=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}`,U=Pe(re,{auth:{token:D}});R.current=U,window.currentSocket=U,U.on("connect",()=>{U.emit("joinGame",{gameId:parseInt(n)})}),U.on("gameUpdate",p=>{if(p.game){if(p.type==="playerTeamChanged")return;i(p.game),p.game.status==="finished"?setTimeout(()=>{u(!0)},1e3):p.game.status==="stopped"&&(u(!1),e({message:"El juego ha sido detenido. Puedes seleccionar tu equipo.",type:"info"}))}}),U.on("joinSuccess",p=>{p.user&&(r(p.user),j.current=p.user)}),U.on("codeChallengeResult",p=>{p.success?e({message:p.message,type:"success"}):e({message:p.message,type:"error"})}),U.on("bombChallengeResult",p=>{p.success?e({message:p.message,type:"success"}):e({message:p.message,type:"error"})}),U.on("bombDeactivationResult",p=>{p.success?e({message:p.message,type:"success"}):e({message:p.message,type:"error"})}),U.on("gameActionError",p=>{console.error(`Game action error (${p.action}):`,p.error),e({message:`Error: ${p.error}`,type:"error"})}),U.on("connect_error",p=>{console.error("WebSocket connection error:",p)}),U.on("disconnect",p=>{(p==="io server disconnect"||p==="transport close")&&e({message:"Conexión perdida con el servidor",type:"error"})})}ke(()=>{x=!1,R.current&&R.current.disconnect()})}),Je(()=>{var T;const x=s(),G=t();if(!x||!G||a())return;const D=x.owner&&x.owner.id===G.id,M=x.status==="stopped",re=x.status==="finished",U=(T=x.players)==null?void 0:T.find(O=>{var se;return((se=O==null?void 0:O.user)==null?void 0:se.id)===G.id}),p=(U==null?void 0:U.team)&&U.team!=="none";re&&setTimeout(()=>{k()},1e3),!D&&M?(d()?l(!0):l(!1),E()||p||(g(!0),f(!0))):l(!1),M||f(!1)});const ne=()=>{window.location.href="/dashboard"},ee=()=>{window.location.reload()},oe=()=>{},ae=()=>{s()},k=()=>{u(!0)},_=()=>{u(!1)},q=()=>{g(!1),l(!1)},B=()=>{const x=s(),G=t();if(!x||!G)return;const D=x.owner&&x.owner.id===G.id,M=x.status==="stopped";!D&&M&&g(!0)};return{currentUser:t,currentGame:s,isLoading:a,mapRef:y,mapInstanceRef:b,userMarkerRef:w,playerMarkersRef:$,controlPointMarkersRef:m,socket:R.current,goBack:ne,reloadPage:ee,centerOnUser:oe,centerOnSite:ae,controlPointMarkers:K(),positionCircles:L(),pieCharts:Z(),isGameResultsDialogOpen:c,openGameResultsDialog:k,closeGameResultsDialog:_,showTeamSelection:h,hideTeamSelection:q,showTeamSelectionManual:B}};var Js=I("<div class=loading>Cargando juego..."),Ws=I("<div class=loading>Error al cargar el juego"),Ks=I("<div class=team-selection-dialog><h3>Seleccionar Equipo</h3><p>Diálogo de selección de equipo en desarrollo</p><button>Cerrar"),zs=I("<div class=game-results-dialog><h3>Resultados del Juego</h3><p>Diálogo de resultados en desarrollo</p><button>Cerrar"),Ys=I("<div class=game-player-container><div class=map-container></div><div><div></div><div><div class=game-overlay><h3></h3><p>Estado: </p><p>Jugadores: </p></div><div class=location-info><p>Información de ubicación</p></div></div><div class=map-controls><button>Volver</button><button>Recargar</button><button>Centrar en mí</button><button>Centrar en sitio</button><button>Cambiar equipo</button><button>Resultados");function Xs(n){const{addToast:e}=ve(),t=b=>{e({message:b.message,type:b.type})},{currentUser:r,currentGame:s,isLoading:i,mapRef:a,goBack:o,reloadPage:c,centerOnUser:u,centerOnSite:h,isGameResultsDialogOpen:l,openGameResultsDialog:d,closeGameResultsDialog:g,showTeamSelection:E,hideTeamSelection:f,showTeamSelectionManual:y}=Vs((n==null?void 0:n.gameId)??"",t);return i()?Js():!s()||!r()?Ws():(()=>{var b=Ys(),w=b.firstChild,$=w.nextSibling,m=$.firstChild,R=m.nextSibling,j=R.firstChild,K=j.firstChild,L=K.nextSibling;L.firstChild;var Z=L.nextSibling;Z.firstChild;var ne=R.nextSibling,ee=ne.firstChild,oe=ee.nextSibling,ae=oe.nextSibling,k=ae.nextSibling,_=k.nextSibling,q=_.nextSibling;return nn(a,w),P(K,()=>{var B;return(B=s())==null?void 0:B.name}),P(L,()=>{var B;return(B=s())==null?void 0:B.status},null),P(Z,()=>{var B;return(B=s())==null?void 0:B.activeConnections},null),H(ee,"click",o),H(oe,"click",c),H(ae,"click",u),H(k,"click",h),H(_,"click",y),H(q,"click",d),P(b,S(ye,{get when(){return E()},get children(){var B=Ks(),x=B.firstChild,G=x.nextSibling,D=G.nextSibling;return H(D,"click",f),B}}),null),P(b,S(ye,{get when(){return l()},get children(){var B=zs(),x=B.firstChild,G=x.nextSibling,D=G.nextSibling;return H(D,"click",g),B}}),null),b})()}ge(["click"]);var Qs=I("<div class=loading><div>Cargando Milsim...");function Zs(){const n=hn();return S(Hs,{get gameId(){return n.gameId??""}})}function ei(){const n=hn();return S(Xs,{get gameId(){return n.gameId??""}})}function ti(){const[n,e]=v(null),[t,r]=v(!0);Wt(()=>{const i=F.getCurrentUser();e(i),r(!1)});const s=i=>{e(i)};return S(ye,{get when(){return!t()},get fallback(){return Qs()},get children(){return[S(be,{path:"/login",component:()=>n()?S(Ce,{href:"/dashboard"}):S(Or,{onLogin:s})}),S(be,{path:"/register",component:()=>n()?S(Ce,{href:"/dashboard"}):S(Lr,{})}),S(be,{path:"/dashboard",component:()=>n()?S(jr,{get currentUser(){return n()}}):S(Ce,{href:"/login"})}),S(be,{path:"/create-game",component:()=>n()?S(Hr,{get currentUser(){return n()}}):S(Ce,{href:"/login"})}),S(be,{path:"/owner/:gameId",component:Zs}),S(be,{path:"/player/:gameId",component:ei}),S(be,{path:"/",component:()=>S(Ce,{get href(){return n()?"/dashboard":"/login"}})})]}})}function ni(){return S(Rr,{get children(){return S(pn,{get children(){return S(ti,{})}})}})}var ri=I("<div style=font-family:monospace><h2>ERROR CRÍTICO EN LA APLICACIÓN</h2><pre></pre><details><summary>Stack trace</summary><pre></pre></details><button>Reintentar");window.onerror=(n,e,t,r,s)=>(console.error("Error global capturado:",{msg:n,src:e,line:t,col:r,err:s}),!1);window.addEventListener("unhandledrejection",n=>{console.error("Promise rechazada no manejada:",n.reason),n.preventDefault()});console.log("Starting SolidJS application...");const vt=document.getElementById("root");console.log("Root element:",vt);vt?(Xn(()=>S(zn,{fallback:(n,e)=>(()=>{var t=ri(),r=t.firstChild,s=r.nextSibling,i=s.nextSibling,a=i.firstChild,o=a.nextSibling,c=i.nextSibling;return z(t,"padding","20px"),z(t,"background","#fee"),z(t,"color","#900"),z(t,"border","2px solid #f00"),P(s,()=>n.toString()),P(o,()=>(n==null?void 0:n.stack)??"No stack trace available"),H(c,"click",e),z(c,"padding","10px"),z(c,"background","#900"),z(c,"color","white"),z(c,"border","none"),z(c,"cursor","pointer"),t})(),get children(){return S(pn,{get children(){return S(ni,{})}})}}),vt),console.log("SolidJS application rendered successfully")):console.error("Root element not found!");ge(["click"]);
